{% extends "layout.html" %} 
{% block title %} Settings {% endblock %}} 
{% block body %} 

{% include 'includes/_navbar.html' %} 
{% include 'includes/_sidebar.html' %}


<div class="app-content content container-flid">
	<div class="content-wrapper">
		<div class="content-header row">
			<div class="content-header-left col-md-6 col-xs-12 mb-1">
				<h2 class="content-header-title">Add User</h2>
			</div>
			<div
				class="content-header-right breadcrumbs-right breadcrumbs-top col-md-6 col-xs-12"
			>
				{% include 'includes/_messages.html' %}
			</div>
		</div>


		<div class="content-body">
			<!-- Basic form layout section start -->
			<section id="basic-form-layouts">
				<div class="row match-height">
					{% for collection in data %} {% set item = collection[:-1] %}

					<div class="col-md-6">
						<div class="card">
							<div class="card-header">
								<h4 class="card-title" id="basic-layout-form">
									{{ collection.title() }}
								</h4>
								<a class="heading-elements-toggle"
									><i class="icon-ellipsis font-medium-3"></i
								></a>
								<div class="heading-elements">
									<ul class="list-inline mb-0">
										<li>
											<a data-action="collapse"><i class="icon-minus4"></i></a>
										</li>
										<li>
											<a data-action="expand"><i class="icon-expand2"></i></a>
										</li>
									</ul>
								</div>
							</div>
							<div class="card-body collapse in">
								<div class="card-block">
									<form class="form" method="post" action="/add_session">
										<h4 class="form-section">
											<i class="icon-calendar3"></i> Add {{collection}}
										</h4>
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<input
														type="hidden"
														name="collection"
														value="{{collection}}"
													/>
													<input type="hidden" name="field" value="{{item}}" />
													<input
														type="text"
														required
														class="form-control"
														placeholder="Session"
														name="item"
													/>
												</div>
											</div>
											<div class="col-md-6">
												<!-- Button -->
												<button type="submit" class="btn btn-primary btn-block">
													<i class="icon-check2"></i> Add
												</button>
											</div>
										</div>
									</form>
									{% if data[collection]|length > 0 %}
									<div class="table-responsive">
										<table class="table table-hover mb-0">
											<thead>
												<tr>
													<th>S/N</th>
													<th>Sessions</th>
													<th>Actions</th>
												</tr>
											</thead>
											<tbody>
												{% for datum in data[collection] %}
												<tr>
													<td class="text-truncate">{{loop.index}}</td>
													<td class="text-truncate">
														<span>{{datum[item].title()}}</span>
													</td>
													<td class="text-truncate">
														<form
															action="/delete"
															method="post"
															class="form-inline"
														>
															<input
																type="hidden"
																value="{{datum._id}}"
																name="_id"
															/>
															<input
																type="hidden"
																value="{{collection}}"
																name="collection"
															/>
															<button type="submit" class="btn btn-danger p-0">
																<small> Delete </small>
															</button>
														</form>
													</td>
												</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>
									{% else %}
									<p align="center" class="mt-1">No Sessions Yet!</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					{% endfor %}
				</div>
			</section>
		</div>
	</div>
</div>
{% endblock %}
